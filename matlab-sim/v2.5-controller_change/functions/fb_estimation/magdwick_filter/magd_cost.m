function [f] = magd_cost(q,d,s)
    c11 = 2*(1/2 - q(3)^2 - q(4)^2);
    c12 = 2*(q(1)*q(4) + q(2)*q(3));
    c13 = 2*(q(2)*q(4) - q(1)*q(3));
    c21 = 2*(q(2)*q(3) - q(1)*q(4));
    c22 = 2*(1/2 - q(2)^2 - q(4)^2);
    c23 = 2*(q(1)*q(2) - q(3)*q(4));
    c31 = 2*(q(1)*q(3) + q(2)*q(4));
    c32 = 2*(q(3)*q(4) + q(1)*q(2));
    c33 = 2*(1/2 - q(2)^2 - q(3)^2);
    
    C = [
        c11,c12,c13;
        c21,c22,c23;
        c31,c32,c33;
    ];

    f = C*d-s;
end

